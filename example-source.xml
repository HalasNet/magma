<datasource>

  <valueSets>
    <jpaProvider>
      <entityClass>org.obiba.onyx.core.domain.Interview</entityClass>
      <entityType>Participant</entityType>
      <identifierProperty>participant.barcode</identifierProperty>
      <dateProperty>startDate</dateProperty>
    </jpaProvider>
  </valueSets>

  <variables>
    <beanVariableValueSourceProvider>
      <prefix>Participant</prefix>
      <beanClass>org.obiba.onyx.core.domain.Participant</beanClass>
      <properties>
        <string>firstName</string>
        <string>lastName</string>
        <string>appointment.date</string>
        <string>birthDate</string>
      </properties>
      <nameMap>
        <entry key="appointment.date" value="appointmentDate" />
      </nameMap>
    </beanVariableValueSourceProvider>

    <scriptedVariableSource>
      <variable name="Participant.birthYear" valueType="integer">
        <!-- The script should be made an attribute of the variable. Such that we know how it was derived. It's the variable's algorithm. -->
        <script>dateYear($('Participant.birthDate'))</script>
      </variable>
    </scriptedVariableSource>
  </variables>

</datasource>

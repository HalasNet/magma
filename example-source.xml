<datasource>

  <valueSets>
    <jpaProvider>
      <entityClass>org.obiba.onyx.core.domain.Interview</entityClass>
      <entityType>Participant</entityType>
      <identifierProperty>participant.barcode</identifierProperty>
      <dateProperty>startDate</dateProperty>
    </jpaProvider>
  </valueSets>

  <variables>
    <beanVariableValueSourceProvider>
      <prefix>Participant</prefix>
      <beanClass>org.obiba.onyx.core.domain.Participant</beanClass>
      <properties>
        <string>firstName</string>
        <string>lastName</string>
        <string>appointment.date</string>
        <string>birthDate</string>
      </properties>
      <nameMap>
        <entry key="appointment.date" value="appointmentDate" />
      </nameMap>
    </beanVariableValueSourceProvider>

    <derivedVariableSourceProvider>
      <variable class="variable">
        <name>Participant.birthYear</name>
        <valueType>integer</valueType>
      </variable>
      <source class="scriptedSource">
        <valueType>integer</valueType>
        <script>dateYear($('Participant.birthDate')</script>
      </source>
      <!--source class="datePart">
        <dateSource class="variableValueSource">
          <name>Participant.birthDate</name>
        </dateSource>
        <part>year</part>
      </source-->
    </derivedVariableSourceProvider>
  </variables>

</datasource>
